<div class="shelf">
	<div class="shelf-logo">
		<nuxt-link to="/profile">
			<img :src="logoSrc" :alt="`${storeSlug} Logo`" />
		</nuxt-link>
	</div>
	<section class="assets">
		<!-- <div v-if="variantVideo" class="slide" :style="{ position: 'relative' }">
			<video-player :source="variantVideo.value"></video-player>
		</div> -->
		<no-ssr>
			<!-- <carousel :per-page="1" class="carousel">
				<slide
					class="slide"
					v-for="(asset, index) in variantAssets"
					:key="index"
					:style="{ backgroundImage: 'url(' + asset + ')' }"
				></slide>
			</carousel> -->

			<!-- HOOPER -->
			<hooper :settings="hooperOptions" class="carousel" ref="carousel">
				<slide
					class="slide"
					v-for="(asset, index) in variantAssets"
					:key="index"
					:style="{ backgroundImage: 'url(' + asset + ')' }"
				></slide>
				<hooper-pagination slot="hooper-addons"></hooper-pagination>
			</hooper>
			<!-- SIEMA -->
			<!-- <div class="carousel__pagination">
				<ul>
					<li v-for="(asset, index) in variantAssets" :class="{'active': index === currentSlideIndex}">
					</li>
				</ul>
			</div>
			<siema
				class="carousel"
				:current.sync="currentSlideIndex"
				ref="carousel"
				:options="carouselOptions"
			>
				<div
					v-for="(asset, index) in variantAssets"
					:key="index"
					:style="{ backgroundImage: 'url(' + asset + ')' }"
					class="slide"
				></div>
			</siema> -->
		</no-ssr>
		<!-- <div
			class="slide"
			v-for="(asset, index) in variantAssets"
			:style="{ backgroundImage: 'url(' + asset + ')' }"
		></div> -->
	</section>
	<aside class="shelf-buttons" v-if="shelfGoal === 'PURCHASE'">
		<ul>
			<li>
				<nuxt-link to="/cart">
					<button class="btn btn--round">
						<icon name="cart" :original="true" width="20" height="20"></icon>
						<div v-if="cartItemsCount != 0" class="counter">
							{{ cartItemsCount }}
						</div>
					</button>
				</nuxt-link>
			</li>
			<li>
				<button
					class="btn btn--round"
					v-on:click="showShelfInfo = !showShelfInfo"
				>
					<icon name="info" :original="true" width="18" height="18"></icon>
				</button>
			</li>
		</ul>
	</aside>
	<footer class="shelf-footer">
		<shelf-title
			v-if="variant && variant.price"
			:price="variant.price"
			:currency="variant.currency"
			:title="shelf.name"
		></shelf-title>
		<div class="shelf-attributes">
			<attribute-picker
				v-for="(attribute, attributeKey) in variantProperties"
				:key="attributeKey"
				:attribute="attribute"
				:att-key="attributeKey"
				:selected-attribute="selectedProperty[attributeKey]"
				@changed-att="setAtt"
			></attribute-picker>

			<attribute-picker
				v-for="(attribute, attributeKey) in availableAttributes"
				:key="attributeKey"
				:attribute="attribute"
				:att-key="attributeKey"
				:selected-attribute="selectedAttributes[attributeKey]"
				@changed-att="setAtt"
			></attribute-picker>
		</div>

		<div
			v-if="shelf.description && shelf.description.length > 0"
			class="shelf-description"
		>
			{{ shelf.description }}
		</div>
		<add-to-cart
			:shelf-goal="shelfGoal"
			:variant="variant"
			:selected-attributes="selectedAttributes"
			:selected-property="selectedProperty"
			:shelf="shelf"
		></add-to-cart>
		<div
			v-if="shelfIndex === 0 && !alreadySwiped"
			class="swipe-down"
			@click="swipeDown"
		>
			<!-- <div class="chevron-down"></div> -->
			<icon name="chevron-up" width="28" height="28"></icon>
			<div class="see-more">
				See More
			</div>
		</div>
	</footer>
	<transition name="shelf-overlay-bottom">
		<shelf-info
			v-if="showShelfInfo"
			:info="shelf.info"
			:returns="returns"
			:shipping="shippingDetails"
			v-on:close-info="showShelfInfo = false"
		></shelf-info>
	</transition>
	<div class="shelf-scrims">
		<div class="shelf-scrims--top"></div>
		<div class="shelf-scrims--bottom"></div>
	</div>
</div>
